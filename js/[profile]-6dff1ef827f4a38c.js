(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{97437:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[profile]",function(){return i(52145)}])},23230:function(e,t,i){"use strict";function logout(){window.localStorage.clear(),window.sessionStorage.clear(),window.location.href="/logout"}i.d(t,{Z:function(){return logout}})},32286:function(e,t,i){"use strict";i.d(t,{Z:function(){return Handle}});var n=i(11527),r=i(43917),o=i(43194);function Handle(e){let{handle:t,color:i,linked:l=!0}=e,a="/"+t;return(0,n.jsx)(r.Z,{component:l?o.Z:"span",href:l?a:void 0,color:i,fontWeight:"medium",underline:"none",children:a})}},77678:function(e,t,i){"use strict";i.d(t,{Z:function(){return PageFooter}});var n=i(11527),r=i(23230),o=i(32955),l=i(25540),a=i(128),s=i(38475),d=i(52469),c=i(83399),u=i(43917),p=i(51619),h=i(43194),m=i(53447),x=i(86362),f=i(40615),g=i(7022),v=i.n(g),Z=i(1961),j=i.n(Z),b=i(68195),w=i(6749),k=i(10218),y=i(41154),L=i(68708),C=i(8251),S=i(50959),P=i(10619),components_SafariIcon=e=>(0,n.jsx)(P.Z,{...e,children:(0,n.jsx)("path",{d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,14.09 4.8,16 6.11,17.41L9.88,9.88L17.41,6.11C16,4.8 14.09,4 12,4M12,20A8,8 0 0,0 20,12C20,9.91 19.2,8 17.89,6.59L14.12,14.12L6.59,17.89C8,19.2 9.91,20 12,20M12,12L11.23,11.23L9.7,14.3L12.77,12.77L12,12M12,17.5H13V19H12V17.5M15.88,15.89L16.59,15.18L17.65,16.24L16.94,16.95L15.88,15.89M17.5,12V11H19V12H17.5M12,6.5H11V5H12V6.5M8.12,8.11L7.41,8.82L6.35,7.76L7.06,7.05L8.12,8.11M6.5,12V13H5V12H6.5Z"})}),E=S.forwardRef(function(e,t){let[i,r]=S.useState(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j(),{...e,ref:t,onClick:t=>{if(w.Z.isInstagramBrowser()){if(w.Z.isAndroid()){t.preventDefault();let i=window.location.protocol+"//"+window.location.host,n=new URL(e.href,i);window.location.href="intent:"+n+"#Intent;end"}else w.Z.isIOS()&&(t.preventDefault(),r(!0))}}}),(0,n.jsxs)(y.Z,{sx:{mt:-4,backdropFilter:"blur(4px)"},open:i,onClose:()=>r(!1),PaperProps:{sx:{py:3,maxWidth:400}},children:[(0,n.jsx)(components_SafariIcon,{sx:{fontSize:42,mx:"auto"}}),(0,n.jsx)(C.Z,{variant:"h6",textAlign:"center",children:"Open in Safari to Continue"}),(0,n.jsxs)(L.Z,{sx:{textAlign:"center"},children:[(0,n.jsxs)(x.Z,{variant:"body2",children:["Long press on the button below and select ",(0,n.jsx)("strong",{children:"Open Link"})," ","to continue."]}),(0,n.jsx)(p.Z,{variant:"outlined",endIcon:(0,n.jsx)(k.Z,{}),sx:{borderRadius:100,mt:4,borderWidth:"2px !important"},size:"large",href:e.href,onClick:e=>e.preventDefault(),children:"Long Press to Continue"}),(0,n.jsx)(p.Z,{size:"small",color:"inherit",href:"/legal/instagram-browser",sx:{mt:3},children:"Read more"})]})]})]})}),I=i(94190);function PageFooter(e){var t;let{login:i=!0,waitlist:g=!0,brand:Z}=e,{user:w}=(0,c.aF)(),k=(0,o.Z)(),y=(0,b.useRouter)().pathname,L=(0,s.Z)(e=>e.account),C=(0,a.Z)(),S=L?null!==(t=L.maxProfiles)&&void 0!==t?t:1/0:1,P=y.startsWith("/profile"),T=(0,l.Z)(),R=(0,f.Z)().palette.mode;return Z=null!=Z?Z:null==C?void 0:C.Brand,(0,n.jsxs)(m.Z,{mt:"auto",pt:24,pb:18,gap:2,alignItems:"center",children:[(0,n.jsx)(m.Z,{alignItems:"center",children:Z?(0,n.jsxs)(m.Z,{alignItems:"center",children:[Z.logo[R]&&(0,n.jsx)(u.Z,{component:"a",href:Z.website,target:"_blank",rel:"noopener noreferrer",sx:{mb:1,width:100,height:30,position:"relative","*":{maxWidth:"100%",objectFit:"contain"}},children:(0,n.jsx)(v(),{src:Z.logo[R],width:100,height:30,alt:Z.name})}),(0,n.jsxs)(x.Z,{variant:"caption",align:"center",color:"text.secondary",lineHeight:2,children:["x",(0,n.jsx)("br",{}),(0,n.jsx)(h.Z,{underline:"none",color:"inherit",href:"https://get.dott.bio",children:"dott.bio"})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.rG,{style:{width:12,height:12,opacity:.1}}),(0,n.jsx)(x.Z,{variant:"caption",align:"center",sx:{mt:2,opacity:.2},children:"info@dott.bio"})]})}),!!(!w&&g&&!P)&&(0,n.jsx)(p.Z,{sx:{mt:3},LinkComponent:E,color:"primary",variant:"outlined",size:"small",!!(i&&!w)&&(0,n.jsx)(p.Z,{LinkComponent:E,!!(w&&!P&&!T)&&(0,n.jsx)(p.Z,{LinkComponent:j(),href:"/profile/select",color:"inherit",variant:"text",size:"small",sx:{mt:8,px:2},children:S>1?"Your Profiles":"Your Profile"}),!!(w&&P)&&(0,n.jsx)(p.Z,{href:"/logout",color:"error",variant:"text",size:"small",sx:{mt:8,px:2},onClick:(0,d.d)(r.Z),children:"Log out"})]})}},68275:function(e,t,i){"use strict";i.d(t,{Z:function(){return PlatformIcon}});var n=i(11527),r=i(43917),o=i(20453),l=i(94190);function PlatformIcon(e){var t;let{platform:i,...r}=e,o=i?null!==(t=(0,l.$x)(i))&&void 0!==t?t:(0,l.EM)(i):null;return o?(0,n.jsx)(o,{...r}):(0,n.jsx)(a,{sx:r.sx,style:r.style})}let a=(0,o.ZP)(r.Z)(e=>{let{theme:t}=e;return{borderRadius:"50%",border:"4px solid currentColor"}})},57803:function(e,t,i){"use strict";i.d(t,{Z:function(){return Page}});var n=i(11527),r=i(32955);let getTokenLife=e=>1e3*e.exp-Date.now();var o=i(83399),l=i(7288),a=i(50959),s=i(84357);let useSupabaseTokenKeepalive=()=>{let e=(0,s.Z)(e=>e.token),t=(0,l.D)(e),{user:i}=(0,o.aF)(),n=!!i;a.useEffect(()=>{if(!t||!e||!n)return;let i=getTokenLife(t.claims),r=getTokenLife(e.claims);i<r&&i<=0&&(console.info("Reloading window: token expired."),window.location.reload())},[n,t,e]);let r=a.useCallback(()=>{var t;if(!i)return;let n=i&&(null==e?void 0:e.claims.oauth_sub)!==(null==i?void 0:i.sub);if(n){console.info("Refreshing token. User changed."),s.Z.sync.pull();return}let r=null!==(t=(null==e?void 0:e.claims)&&getTokenLife(e.claims))&&void 0!==t?t:0;r<18e5&&(console.info("Refreshing token. Lifetime: ".concat(r/1e3,"s.")),s.Z.sync.pull())},[null==e?void 0:e.claims,i]);a.useEffect(()=>{r();let e=window.setInterval(r,3e4);return()=>window.clearInterval(e)},[r])};var d=i(38475),c=i(58193),u=i(16528),p=i(53447),h=i(20453),m=i(28013),x=i.n(m);function Page(e){let{children:t,title:i,description:o,variant:l,out:a,onTransitionEnd:s,...c}=e;useSupabaseTokenKeepalive();let p=(0,d.Z)(e=>!!e.user),h=(0,r.Z)(),m=i?"profile"===l?"".concat(i," ‧ dott.bio"):"".concat(null!=h?h:"dott.bio"," ‧ ").concat(i):"dott.bio";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(x(),{children:[(0,n.jsx)("title",{children:m}),(0,n.jsx)("meta",{property:"og:title",content:m}),(0,n.jsx)("meta",{name:"description",content:o},"description"),(0,n.jsx)("meta",{property:"og:description",content:o})]}),(0,n.jsx)(u.Z,{appear:p,in:!a,timeout:400,onTransitionEnd:s,children:(0,n.jsx)(f,{mt:"profile"===l?0:"calc(16px + 4vw)",gap:"profile"===l?0:1.5,...c,children:t})})]})}let f=(0,h.ZP)(p.Z)({position:"relative",maxWidth:c.g,width:"100%",marginLeft:"auto",marginRight:"auto",paddingLeft:"8px",paddingRight:"8px","@media (min-width: 320px)":{paddingLeft:"16px",paddingRight:"16px"},"@media (min-width: 390px)":{paddingLeft:"20px",paddingRight:"20px"},"@media (min-width: 420px)":{paddingLeft:"32px",paddingRight:"32px"}})},64509:function(e,t,i){"use strict";var n=i(86947),r=i(20453);let o=(0,r.ZP)(n.ZP)({border:"none",font:"inherit",color:"inherit",textTransform:"inherit",lineHeight:"inherit",padding:0,margin:0,minHeight:"1em","> input":{height:"auto",textTransform:"inherit",padding:0}});t.Z=o},32249:function(e,t,i){"use strict";i.d(t,{Z:function(){return useActiveProfileId}});var n=i(82299),r=i(8781);function useActiveProfileId(){return(0,n.Z)(e=>(0,r.Qj)(e)?e.profileId:void 0)}},84330:function(e,t,i){"use strict";i.d(t,{Z:function(){return useChangeProfile}});var n=i(88458),r=i(50959);function useChangeProfile(e){return r.useCallback(t=>{n.Z.patch({profile:{[e]:t}})},[e])}},128:function(e,t,i){"use strict";i.d(t,{Z:function(){return useProfileWithChanges}});var n=i(82299),r=i(88458),o=i(50959),l=i(17658);function useProfileWithChanges(){let e=(0,n.Z)(),t=(0,r.Z)();return o.useMemo(()=>{var i,n,r;return e?{...(0,l.Z)(e,t.profile),Links:(null!==(r=null!==(n=null===(i=t.profile)||void 0===i?void 0:i.Links)&&void 0!==n?n:null==e?void 0:e.Links)&&void 0!==r?r:[]).map(e=>({...e,...t.links[e.url]}))}:null},[e,,t])}},52145:function(e,t,i){"use strict";i.r(t),i.d(t,{__N_SSP:function(){return tk},default:function(){return ty}});var n,r=i(11527),o=i(77678),l=i(57803),a=i(82299),s=i(88458),d=i(32511),c=i(40463),u=i(71367);let p=(0,d.Z)((0,c.Z)({})).with((0,u.Z)()).seal();var h=i(58229),m=i(29700);let toLinkMetadata=e=>{let{meta:t,text:i,thumbnails:n}=e;return(0,m.Z)({...t,...i,...n}).prune()},patchLinkMetadata=(e,t,i)=>{var n;return{...e,Links:null==e?void 0:null===(n=e.Links)||void 0===n?void 0:n.map(e=>e.url===t?{...e,metadata:{...e.metadata,...i}}:e)}};var x=i(50959),f=i(88899),g=i(32249),v=i(60676);let applyDiscovery=e=>{p.patch(t=>({[e.originalURL]:{...t[e.originalURL],...e}}));let t=toLinkMetadata(e);a.Z.patch(i=>i?patchLinkMetadata(i,e.originalURL,t):null),h.Z.get().isEditing&&s.Z.patch(i=>({profile:i.profile?patchLinkMetadata(i.profile,e.originalURL,t):i.profile}))};var Z=i(43984),j=i(35664),b=i(53447),w=i(86362),k=i(51267);let statusMessage=e=>e.endedAt?"Done!":e.text&&!e.thumbnails?"Fetching media …":"Loading …";function LinkDiscoveryStatus(){let e=Object.values(p());return!function(){let{db:e}=(0,f.Z)(),[t,i]=x.useState(!1),n=(0,v.Z)(),r=(0,g.Z)();x.useEffect(()=>{if(n)return i(!0),()=>{};{let e=setTimeout(()=>i(!1),6e4);return()=>clearTimeout(e)}},[n]),x.useEffect(()=>{if(!e||!r||!t)return;let i=e.realtime.channel("LinkDiscoveries:".concat(r)).on("postgres_changes",{event:"UPDATE",schema:"public",table:"Discovery",filter:"profileId=eq.".concat(r)},e=>applyDiscovery(e.new)).subscribe();return()=>{i.unsubscribe()}},[e,r,t])}(),(0,r.jsx)(r.Fragment,{children:e.map(e=>(0,r.jsxs)(k.ZP,{visible:!e.endedAt,onClose:()=>{e.originalURL&&p.remove(e.originalURL)},children:[(0,r.jsxs)(b.Z,{alignItems:"center",justifyContent:"space-between",direction:"row",gap:1,children:[(0,r.jsxs)(w.Z,{variant:"caption",color:"text.secondary",children:["Discovering ",(0,Z.Vu)(e.originalURL)]}),(0,r.jsx)(j.Z,{size:14,thickness:5,color:"primary",value:e.endedAt?100:void 0,variant:e.endedAt?"determinate":"indeterminate"})]}),(0,r.jsx)(w.Z,{variant:"body2",children:statusMessage(e)})]},e.discoveryId))})}var y=i(43089);let L={activationConstraint:{delay:150,tolerance:10}},C={activationConstraint:{delay:150,tolerance:5}};function useDragSensors(){return(0,y.Dy)((0,y.VT)(y.LO,L),(0,y.VT)(y.MA,C))}var S=i(61690),P=i(41605);let E=(0,d.Z)((0,c.Z)({active:null,supressed:[]})).with((0,S.m)()).with((0,P.Z)({name:"HintState",map:e=>({...e,active:null})})).with(e=>({activate:t=>{var i,n;let r=e.get().supressed.includes(t.id);if(r)return;let o=null!==(n=null===(i=e.get().active)||void 0===i?void 0:i.priority)&&void 0!==n?n:-1/0;t.priority<o||e.set(e=>({...e,active:t}))},supress:t=>{e.get().supressed.includes(t)||e.set(e=>{var i;return{...e,active:(null===(i=e.active)||void 0===i?void 0:i.id)===t?null:e.active,supressed:[...e.supressed,t]}})}}));var I=i(92838),T=i(79897),R=i(97601),A=i(43917),F=i(26216),W=i(20453),D=i(18106),M=i(52469),B=i(51619),z=i(3270),O=i(39346),H=i(62763),U=i(7931),_=i(7269);let V=x.forwardRef(function(e,t){let{id:i,enabled:n=!1,priority:o=0,children:l,title:a,content:s,placement:d,scroll:c}=e,[u,p]=x.useState(null),h=E(e=>e.active),m=(null==h?void 0:h.id)!==i,f=E(e=>e.supressed.includes(i)),g=n&&!(m||f);x.useEffect(()=>{n&&E.activate({id:i,priority:o})},[n,o,i]),x.useEffect(()=>{c&&g&&u&&setTimeout(()=>{u.scrollIntoView({behavior:"smooth",block:"center"})},200)},[c,g,u]);let v=(0,M.e)(()=>{E.supress(i)});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.Z,{sx:{zIndex:9999},transition:!0,open:g,anchorEl:u,placement:d,children:e=>{let{TransitionProps:t}=e;return(0,r.jsx)(U.Z,{...t,children:(0,r.jsxs)(N,{variant:"outlined",children:[(0,r.jsxs)(H.Z,{sx:{pb:0},children:[(0,r.jsx)(w.Z,{variant:"caption",gutterBottom:!0,children:a}),(0,r.jsx)(w.Z,{variant:"body2",color:"text.secondary",children:s})]}),(0,r.jsx)(q,{children:(0,r.jsx)(B.Z,{size:"small",onClick:v,children:"Dismiss"})})]})})}}),x.cloneElement(l,{ref:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){for(let i of t)"function"==typeof i?i(e):i&&(i.current=e)}}(p,t)})]})}),q=(0,W.ZP)(O.Z)({justifyContent:"flex-end"}),N=(0,W.ZP)(z.Z)(e=>{let{theme:t}=e;return{maxWidth:400,width:"100%",margin:t.spacing(1),overflow:"visible"}});var G=i(44749);let linkURL=e=>"/api/link?"+(0,m.Z)(e).querystring();var K=i(8781),Y=i(37190);let discoverURL=e=>"/api/discover?"+(0,m.Z)(e).querystring();var X=i(33462),Q=i(32955);let $=(0,Y.Z)(async(e,t)=>G.ZP.post(discoverURL(e),t)),useExploreLink=()=>{let e=(0,Q.Z)();return x.useCallback(async t=>{if(!e)return;let i=await $({handle:e,link:t.url},t.metadata).catch();if("discoveryId"in i){p.patch({[t.url]:i});return}let n={...t,metadata:{...null==t?void 0:t.metadata,...(0,X.Z)(i)}};h.Z.get().isEditing?s.Z.patch(e=>{var i;return{profile:{Links:null===(i=e.profile.Links)||void 0===i?void 0:i.map(e=>e.url===t.url?n:e)}}}):a.Z.patch(e=>{var i;return{Links:null==e?void 0:null===(i=e.Links)||void 0===i?void 0:i.map(e=>e.url===t.url?n:e)}})},[e])},J=(0,Y.Z)(async e=>G.ZP.post(linkURL(e)));function useAddLink(){let e=useExploreLink();return x.useCallback(async t=>{let i=a.Z.get();if(!(0,K.Qj)(i))return;let n=h.Z.get().newSectionIndex,r=null!==n?n+1:i.Links.length;h.Z.patch({isAddingLink:!0});try{var o,l,d,c;let n=await J({handle:i.handle,link:t}),a=null==i?void 0:null===(o=i.Links)||void 0===o?void 0:o.some(e=>{let{url:t}=e;return t===n.url});if(!i||a)return;let u=null!==(c=null!==(d=null===(l=s.Z.get())||void 0===l?void 0:l.profile.Links)&&void 0!==d?d:i.Links)&&void 0!==c?c:[],p=u.slice(0,r),m=u.slice(r);s.Z.patch({profile:{Links:[...p,n,...m]}}),e(n),h.Z.patch({addLinkError:null})}catch(e){h.Z.patch({addLinkError:e})}finally{h.Z.patch({isAddingLink:!1})}},[e])}var ee=i(13117),et=i(59352);let normalizeLink=e=>/^http(s)?:\/\//.test(e)?e:"https://".concat(e);var ei=i(10889),en=i(23276),er=i(49237),eo=i(70661),el=i(68275);function NewLinkInput(e){let{label:t,disableSubmit:i,onSubmit:n,focus:o}=e,[l,a]=x.useState(o),[s,d]=x.useState(""),[c,u]=x.useState(null),p=(0,Q.Z)();x.useEffect(()=>{if(l&&c){var e;null===(e=c.querySelector("input"))||void 0===e||e.focus()}});let m=(0,h.Z)(e=>e.isAddingLink),f=x.useMemo(()=>(0,Z.Vu)(normalizeLink(s)),[s]);return(0,r.jsx)(z.Z,{noValidate:!0,component:"form",elevation:0,sx:{overflow:"visible",borderRadius:"12px"},onSubmit:(0,M.d)(()=>{null==n||n(s).catch(()=>null).finally(()=>d(""))}),children:(0,r.jsx)(eo.Z,{ref:u,fullWidth:!0,value:s,type:"url",label:l||s?null:(0,r.jsxs)(w.Z,{component:"span",display:"flex",gap:1,fontWeight:"bold",children:[(0,r.jsx)(ei.Z,{}),t]}),onFocus:()=>a(!0),onBlur:()=>a(!1),onChange:e=>d(e.target.value),color:"primary",placeholder:"e.g instagram.com/".concat(p),sx:{position:"relative",borderRadius:"12px",backgroundColor:e=>(0,D.Fq)(e.palette.primary.main,.12),legend:{ml:1.4},label:{ml:1.5,color:e=>e.palette.primary.main},input:{ml:1.5},fieldset:{borderColor:"transparent",borderWidth:"1px !important"},"&:hover":{fieldset:{borderColor:e=>e.palette.primary.main+" !important"}}},inputProps:{"data-test-id":"NewLinkInput-input",style:{cursor:l?"text":"pointer"}},InputProps:{sx:{borderRadius:"12px"},style:{cursor:l?"text":"pointer"},endAdornment:(0,r.jsx)(er.Z,{position:"end",sx:{pr:.5},children:(0,r.jsx)(ee.Z,{in:l,sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:m?(0,r.jsx)(j.Z,{size:20,thickness:5,sx:{mt:"5px",mr:"2px"}}):(0,r.jsx)(B.Z,{type:"submit",variant:"text",color:"primary",disabled:i||!s,endIcon:null===f?(0,r.jsx)(en.Z,{style:{margin:"0 -3px"}}):(0,r.jsx)(el.Z,{fontSize:"small",sx:{width:18,height:18,mr:-.5,mb:"2px"},platform:f}),children:"Add"})})})}})})}function AddSectionForm(e){let{open:t,onClose:i=()=>{}}=e,n=useAddLink(),o=x.useRef();return(0,et.O)(o,i),x.useEffect(()=>{let onKeyPress=e=>{"Escape"===e.key&&i()};return window.addEventListener("keypress",onKeyPress),()=>{window.removeEventListener("keypress",onKeyPress)}},[i]),(0,r.jsx)(ee.Z,{mountOnEnter:!0,unmountOnExit:!0,in:t,ref:o,children:(0,r.jsx)(ea,{children:(0,r.jsx)(NewLinkInput,{focus:!0,onSubmit:e=>n(e).then(i),label:"Add link or email"})})})}let ea=(0,W.ZP)(b.Z)(e=>{let{theme:t}=e;return{paddingTop:t.spacing(1),paddingBottom:t.spacing(2),paddingLeft:t.spacing(1),paddingRight:t.spacing(1),marginLeft:-t.spacing(1),borderRadius:3}});var es=i(25540),ed=i(87233),ec=i(57861),eu=i(7022),ep=i.n(eu),eh=i(25486);function useOutlinkProps(e){let{source:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,Q.Z)(),n=(0,v.Z)(),r=(0,eh.Z)(),o=(0,M.e)(()=>{if(n||r||!i)return;let o="/out/".concat(i,"?url=")+encodeURIComponent(e);t&&(o+="&s=".concat(t)),window.location.href=o});return{onClick:o,href:e}}var em=i(128),ex=i(93462),ef=i(84387);function CardLink(e){let{url:t,children:i,CardButtonProps:n,...o}=e,l=(0,v.Z)(),a=useOutlinkProps(t);return(0,r.jsx)(z.Z,{elevation:0,sx:{mb:1,backgroundColor:e=>e.palette.background.paper},...o,children:(0,r.jsx)(eg,{...a,LinkComponent:l?"div":"a",disableRipple:l,...n,style:{background:l?"transparent":void 0,cursor:l?"inherit":void 0,...null==n?void 0:n.style},children:i})})}let eg=(0,W.ZP)(ex.Z)({m:0,px:2.5,py:1,"@media (min-width: 600px)":{px:3.5,py:1.5}}),ev=(0,W.ZP)(A.Z)({display:"flex",flex:"0 0 auto","> *":{mt:"1px",width:"18px !important",height:"18px !important","@media (min-width: 600px)":{width:"20px !important",height:"20px !important"}}}),eZ=(0,W.ZP)(w.Z)({fontWeight:600,fontSize:"1rem",lineHeight:1.7,"@media (min-width: 600px)":{fontSize:"1.125rem",lineHeight:1.8}});(0,W.ZP)(ef.Z)(e=>{let{width:t}=e;return{height:"28px","@media (min-width: 600px)":{height:"32px",width:"number"==typeof t?"".concat(1.05*t+10,"px !important"):t}}});let ej=(0,W.ZP)(w.Z)({fontSize:"0.875rem",lineHeight:1.7,"@media (min-width: 600px)":{fontSize:"1rem"}}),eb=(0,W.ZP)(ef.Z)(e=>{let{width:t}=e;return{height:"24px","@media (min-width: 600px)":{height:"32px",width:"number"==typeof t?"".concat(1.05*t+10,"px !important"):t}}}),ew=(0,W.ZP)(w.Z)({fontSize:"0.75rem",lineHeight:1.4,"@media (min-width: 600px)":{fontSize:"0.875rem",lineHeight:1.5}}),ek=(0,W.ZP)(ef.Z)(e=>{let{width:t}=e;return{height:"18px","@media (min-width: 600px)":{height:"22px",width:"number"==typeof t?"".concat(1.05*t+10,"px !important"):t}}}),CardLinkHeader=e=>{var t;let{icon:i,title:n,end:o}=e,l=(0,v.Z)(),a=(null===(t=(0,em.Z)())||void 0===t?void 0:t.settings.linkStyle)!=="text";return(0,r.jsxs)(b.Z,{direction:"row",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",width:"100%",pr:l&&o?3.5:0,children:[(0,r.jsxs)(b.Z,{sx:{flexDirection:"row",alignItems:"center",gap:1,flex:1,"@media (min-width: 600px)":{gap:1.5}},children:[!!i&&a&&(0,r.jsx)(ev,{children:i}),!!n&&(0,r.jsx)(eZ,{flex:"1",children:n})]}),!!o&&(0,r.jsx)(b.Z,{direction:"row",alignItems:"center",gap:1,children:o})]})};var ey=i(9108),eL=i(75165),eC=i(64358),eS=i(41132),eP=i(48658);function MoreMenu(e){var t;let{icon:i,button:n,ButtonProps:o,...l}=e,[a,s]=x.useState(null),d=(0,M.e)(e=>{s(e.currentTarget)});return(0,r.jsxs)(r.Fragment,{children:[null!==(t=null==n?void 0:n(d))&&void 0!==t?t:(0,r.jsx)(eE,{"aria-label":"Meny","aria-haspopup":"true",onClick:d,...o,children:null!=i?i:(0,r.jsx)(eC.Z,{})}),(0,r.jsx)(eP.Z,{anchorEl:a,...l,open:!!a,onClose:()=>s(null),onClick:()=>s(null)})]})}let eE=(0,W.ZP)(eS.Z)({touchAction:"none"});function EditableLink(e){let{link:t,children:i}=e,n=(0,v.Z)(),o=x.useCallback(()=>{let e=a.Z.get();(0,K.Qj)(e)&&s.Z.patch(i=>{var n,r,o;return{profile:{Links:null===(n=null!==(o=null===(r=i.profile)||void 0===r?void 0:r.Links)&&void 0!==o?o:e.Links)||void 0===n?void 0:n.filter(e=>{let{url:i}=e;return i!==t.url})}}})},[t]);return(0,r.jsxs)(A.Z,{position:"relative",children:[(0,r.jsx)(ee.Z,{mountOnEnter:!0,sx:{zIndex:1,position:"absolute",right:"8px",top:"10px","@media (min-width: 600px)":{top:"12px",right:"9px"}},in:n,children:(0,r.jsx)(MoreMenu,{icon:(0,r.jsx)(ey.Z,{fontSize:"small",sx:{width:"17px",height:"17px"}}),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},ButtonProps:{size:"small",sx:{width:"26px",height:"26px",backgroundColor:e=>(0,D._j)(e.palette.background.paper,.025),"&:hover":{backgroundColor:e=>(0,D._j)(e.palette.background.paper,.1)}}},children:(0,r.jsx)(eL.Z,{onClick:o,sx:{color:e=>e.palette.error.main},children:"Remove"})})}),i]})}var eI=i(51882),eT=i(17077),eR=i(40615);let levelToAlpha=e=>{switch(e){case"NONE":return .0375;case"FIRST_QUARTILE":return .1;case"SECOND_QUARTILE":return .3;case"THIRD_QUARTILE":return .6;case"FOURTH_QUARTILE":return 1}},eA={gap:"4px","> *":{borderRadius:"3px"},"@media (min-width: 440px)":{gap:"5px","> *":{borderRadius:"4px"}}},eF=(0,eT.F4)({"0%":{opacity:.1},"50%":{opacity:1},"100%":{opacity:.1}}),eW=x.memo(function(e){let{weeks:t}=e,i=(0,eR.Z)(),n=!!t;return(0,r.jsx)(b.Z,{sx:eA,direction:"row",width:"100%",py:.5,children:(null!=t?t:function(e){let t={contributionCount:0,contributionLevel:"NONE"},i={contributionDays:Array.from({length:7}).map(()=>t)};return Array.from({length:22}).map(()=>i)}(0)).slice(-22).map((e,t)=>{var i;return 7===(i=e.contributionDays).length?i:0===t?[...Array.from({length:7-i.length}).fill(null),...i]:[...i,...Array.from({length:7-i.length}).fill(null)]}).map((e,t)=>(0,r.jsx)(b.Z,{sx:eA,direction:"column",flex:"1",children:e.map((e,o)=>(0,r.jsx)(eD,{style:{transition:"all 600ms ease-out",animationName:n?"none":void 0,backgroundColor:n?i.palette.success.light:(0,D.Fq)(i.palette.text.disabled,.175*Math.random()),animationDelay:"".concat(t*(7+o)*6,"ms"),opacity:n&&e?(levelToAlpha(e.contributionLevel)+.02*(e.contributionCount||0))*.95:0}},o))},t))})}),eD=(0,W.ZP)(A.Z)({aspectRatio:"1/1",animation:"".concat(eF," 1.5s linear infinite")});var eM=i(68036);function useChangeLink(e){return x.useCallback((t,i)=>{let n=s.Z.get().links[e];s.Z.patch({links:{[e]:{...n,[t]:i}}})},[e])}var eB=i(61542);function EditableText(e){let{value:t,input:i,BoxProps:n}=e,o=(0,v.Z)(),[l,a]=(0,eB.O)(!1);return(0,r.jsx)(A.Z,{position:"relative",minHeight:"1em",borderBottom:"2px solid transparent",borderRadius:"1px",...n,sx:{"&:hover, &:focus":{maskImage:"none"},maskImage:o?"linear-gradient(to right, black, 90%, transparent)":void 0,background:e=>o?(0,D.Fq)(e.palette.text.primary,.08):"transparent",borderBottomColor:e=>l?(0,D.Fq)(e.palette.text.primary,.2):"transparent",...null==n?void 0:n.sx},style:{cursor:o?"pointer":"inherit"},onMouseEnter:()=>o&&a(!0),onMouseLeave:()=>o&&a(!1),onClick:()=>o&&!l&&a(!0),children:o?i:t})}var ez=i(64509),eO=i(58193),eH=i(30295);function Proportion(e){let{initialWidth:t,children:i,ratio:n}=e,[o,l]=x.useState(null),[a,s]=x.useState(t/n);return x.useEffect(()=>{if(!o)return;s(o.offsetWidth/n);let e=new ResizeObserver(e=>{let[t]=e;if(!t)return;let i=t.contentRect.width,r=i/n;s(r)});return e.observe(o),()=>e.disconnect()},[n,o]),(0,r.jsx)(A.Z,{ref:l,style:{width:"100%",height:a},children:i})}var eU=i(97336),e_=i.n(eU);function TwitchEmbedScript(e){return(0,r.jsx)(e_(),{...e,src:"https://embed.twitch.tv/embed/v1.js"})}function EmbeddedTwitchVideo(e){let{channel:t,initialWidth:i,enableFullscreen:n=!0,layout:o="video",muted:l=!0,onStatusChange:a}=e,s=x.useId(),d=(0,eR.Z)(),[c,u]=x.useState(I.Z.isServer?void 0:window.Twitch),p=x.useRef(null);return x.useEffect(()=>{if(p.current||!c)return;let e=new window.Twitch.Embed(s,{channel:t,layout:o,enableFullscreen:n,muted:l,theme:d,width:i});e.addEventListener(window.Twitch.Embed.VIDEO_READY,()=>{e.play()}),e.addEventListener(window.Twitch.Embed.VIDEO_PLAY,()=>{a&&a("online")}),p.current=e},[t,n,s,i,o,l,a,d,c]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(TwitchEmbedScript,{onLoad:()=>u(window.Twitch)}),(0,r.jsx)(Proportion,{initialWidth:null!=i?i:400,ratio:16/9,children:(0,r.jsx)(b.Z,{style:{width:"100%",height:"100%"},sx:{margin:"0 auto",borderRadius:"2px",overflow:"hidden",position:"relative",alignItems:"center",justifyContent:"stretch",iframe:{width:"100% !important",height:"100% !important",backgroundColor:"transparent !important"}},id:s})})]})}function VideoFrame(e){let{children:t}=e,i=(0,v.Z)();return(0,r.jsx)(z.Z,{component:"div",elevation:0,sx:{cursor:i?"default":"pointer",display:"block"},children:t})}let eV=eO.g-16;function ProfileLink(e){let{link:t}=e;return t?(0,r.jsx)(EditableLink,{link:t,children:(0,r.jsx)(ProfileLinkComponent,{link:t})}):null}let eq={LinkCard:function(e){var t,i,n,o,l,a,s,d;let{link:{settings:c,...u}}=e,p=useChangeLink(u.url);return(0,r.jsx)(CardLink,{url:u.url,children:(0,r.jsxs)(b.Z,{width:"100%",children:[(0,r.jsx)(CardLinkHeader,{icon:(null===(t=u.metadata)||void 0===t?void 0:t.favicon)?(0,r.jsx)(ep(),{src:null===(i=u.metadata)||void 0===i?void 0:i.favicon,width:"24",height:"24",alt:"Link icon"}):(0,r.jsx)(el.Z,{platform:u.platform}),title:(0,r.jsx)(EditableText,{BoxProps:{maxWidth:"90%"},value:null!==(o=null!==(n=u.title)&&void 0!==n?n:(0,Z.KT)(u.platform))&&void 0!==o?o:"",input:(0,r.jsx)(ez.Z,{fullWidth:!0,placeholder:"Link title",value:null!==(a=null!==(l=u.title)&&void 0!==l?l:(0,Z.KT)(u.platform))&&void 0!==a?a:"",onChange:e=>{let{target:t}=e;return p("title",t.value)}})})}),(0,r.jsx)(ej,{color:"text.secondary",children:(0,r.jsx)(EditableText,{BoxProps:{component:"span"},value:null!==(s=null==c?void 0:c.subtitle)&&void 0!==s?s:"",input:(0,r.jsx)(ez.Z,{fullWidth:!0,placeholder:"Link subtitle",sx:{maxWidth:"90%"},value:null!==(d=null==c?void 0:c.subtitle)&&void 0!==d?d:"",onChange:e=>{let{target:t}=e;return p("settings",{subtitle:t.value})}})})})]})})},SpotifyEmbed:function(e){var t,i,n,o,l,a,s,d;let{link:c}=e,u="dark"===(0,eR.Z)().palette.mode,p="https://open.spotify.com/embed/".concat(null===(t=c.metadata)||void 0===t?void 0:t.type,"/").concat(null===(i=c.metadata)||void 0===i?void 0:i.id,"?utm_source=generator")+"&theme=".concat(u?"0":"1"),h=(0,v.Z)(),m=(0,eh.Z)(),x=useChangeLink(c.url),f=(null!==(a=null===(n=c.settings)||void 0===n?void 0:n.height)&&void 0!==a?a:(null===(o=c.settings)||void 0===o?void 0:o.size)==="large")?"352px":"152px";return(0,r.jsxs)(A.Z,{pt:1,pb:1,position:"relative",children:[(0,r.jsx)(w.Z,{variant:"overline",color:"text.secondary",children:(0,r.jsx)(EditableText,{BoxProps:{ml:1.3,pl:.7,maxWidth:"85% !important",component:"div",position:"relative"},value:null!==(s=c.title)&&void 0!==s?s:"",input:(0,r.jsx)(ez.Z,{fullWidth:!0,placeholder:"Title",value:null!==(d=c.title)&&void 0!==d?d:"",onChange:e=>{let{target:t}=e;x("title",t.value)}})})}),(null==c?void 0:null===(l=c.metadata)||void 0===l?void 0:l.id)?(0,r.jsx)(A.Z,{component:"iframe",src:p,frameBorder:0,sx:{borderRadius:"12px",width:"100%",border:"none !important",userSelect:"none",backgroundColor:"transparent",outline:"none !important"},style:{height:f+"px",maxHeight:f+"px",pointerEvents:h||m?"none":void 0},height:f,allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"}):(0,r.jsx)(A.Z,{width:"100%",height:f,sx:{bgcolor:e=>(0,D.Fq)(e.palette.text.primary,.02),borderRadius:"12px",width:"100%",border:"none !important",userSelect:"none",outline:"none !important"},style:{height:f+"px",maxHeight:f+"px",pointerEvents:h?"none":void 0}})]})},TwitchStream:function(e){let{link:{url:t,metadata:i,title:n}}=e,o=(0,v.Z)(),l=useChangeLink(t),[a,s]=x.useState("offline");return(0,r.jsxs)(A.Z,{pt:1,pb:1,position:"relative",children:[(0,r.jsx)(w.Z,{component:"div",variant:"overline",color:"text.secondary",children:(0,r.jsxs)(b.Z,{direction:"row",gap:1,alignItems:"center",ml:2,children:[(0,r.jsx)(EditableText,{BoxProps:{maxWidth:"85% !important",component:"div",position:"relative"},value:null!=n?n:"",input:(0,r.jsx)(ez.Z,{fullWidth:!0,placeholder:"Title",value:null!=n?n:"",onChange:e=>{let{target:t}=e;l("title",t.value)}})}),!o&&"online"===a&&(0,r.jsx)(eH.Z,{sx:{width:8,height:8,mb:"2px"},color:"error"})]})}),(0,r.jsx)(VideoFrame,{children:(0,r.jsx)(EmbeddedTwitchVideo,{channel:null==i?void 0:i.handle,initialWidth:eV,onStatusChange:s})})]})},InstagramWidget:function(e){var t;let{link:{url:i,metadata:n}}=e,o=(0,em.Z)(),l=(0,es.Z)(),a=(0,v.Z)(),s=!!n.name||void 0!==n.isBroken;return l||s?(0,r.jsx)(CardLink,{url:i,CardButtonProps:{sx:{"&:hover img":{opacity:.8,transition:"opacity 200ms ease-in-out"}}},children:(0,r.jsxs)(b.Z,{width:"100%",children:[(0,r.jsx)(CardLinkHeader,{icon:(0,eM.iG)(null==o?void 0:o.theme)?(0,r.jsx)(el.Z,{platform:"Instagram"}):(0,r.jsx)(ep(),{src:"/img/platform/Instagram/outline_color.svg",width:"18",height:"18",alt:"Instagram"}),title:"Instagram",end:(0,r.jsx)(eI.Z,{size:"small",label:"@"+(n.name||n.handle)})}),(0,r.jsx)(b.Z,{direction:"row",justifyContent:"space-between",children:(0,r.jsxs)(b.Z,{direction:"row",columnGap:"4px",alignItems:"center",children:[n.followers?(0,r.jsxs)(ew,{color:"text.secondary",children:[n.followers," followers"]}):a&&!s?(0,r.jsx)(ek,{width:70}):null,n.posts&&n.followers?(0,r.jsx)(ew,{color:"text.secondary",children:"•"}):null,n.posts?(0,r.jsxs)(ew,{color:"text.secondary",children:[n.posts," posts"]}):a&&!s?(0,r.jsx)(ek,{width:60}):null]})}),(0,r.jsxs)(b.Z,{direction:"row",gap:1,py:1,sx:{":empty":{display:"none"}},children:[!n.latest&&!s&&[,,,].fill(null).map((e,t)=>(0,r.jsx)(ef.Z,{variant:"rectangular",animation:"pulse",sx:{flex:"1 33%",aspectRatio:"1 / 1",borderRadius:"7px",overflow:"hidden",height:"auto"}},t)),null===(t=n.latest)||void 0===t?void 0:t.map((e,t)=>(0,r.jsx)(A.Z,{flex:"1 33%",sx:{aspectRatio:"1 / 1",borderRadius:"7px",overflow:"hidden",bgcolor:e=>(0,D.Fq)(e.palette.text.primary,.05)},children:e?(0,r.jsx)(ep(),{style:{width:"100%",height:"100%",objectFit:"cover"},src:e,width:"300",height:"300",alt:"Image ".concat(t+1)}):null},e))]})]})}):null},YouTubeVideo:function(e){var t,i,n;let{link:o}=e,l="https://www.youtube.com/embed/".concat(null===(t=o.metadata)||void 0===t?void 0:t.id,"?utm_source=generator"),a=(0,v.Z)(),s=(0,eh.Z)(),d=useChangeLink(o.url);return(0,r.jsxs)(A.Z,{pt:1,pb:4,position:"relative",children:[(0,r.jsx)(w.Z,{variant:"overline",color:"text.secondary",children:(0,r.jsx)(EditableText,{BoxProps:{ml:1.3,pl:.7,maxWidth:"85% !important",component:"div",position:"relative"},value:null!==(i=o.title)&&void 0!==i?i:"",input:(0,r.jsx)(ez.Z,{fullWidth:!0,placeholder:"Title",value:null!==(n=o.title)&&void 0!==n?n:"",onChange:e=>{let{target:t}=e;d("title",t.value)}})})}),(0,r.jsx)(VideoFrame,{children:(0,r.jsx)(Proportion,{initialWidth:400,ratio:16/9,children:(0,r.jsx)("iframe",{frameBorder:0,style:{width:"100%",height:"100%",borderRadius:"4px",border:"none !important",userSelect:"none",pointerEvents:a||s?"none":void 0},src:l,width:"100%",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"})})})]})},OnlyFansWidget:function(e){var t,i,n,o,l,a,s,d;let{link:{url:c,metadata:u}}=e,p=(0,es.Z)(),h=!!u.name;return p||h?(0,r.jsx)(CardLink,{url:c,children:(0,r.jsxs)(b.Z,{width:"100%",pb:.5,children:[(0,r.jsx)(CardLinkHeader,{icon:(0,r.jsx)(ep(),{src:"/img/platform/OnlyFans/fill_color.svg",width:"18",height:"18",alt:"OnlyFans"}),title:"OnlyFans",end:(0,r.jsx)(eI.Z,{size:"small",label:"@"+u.handle})}),(0,r.jsxs)(b.Z,{direction:"row",alignItems:"center",gap:2,children:[(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(ew,{color:"text.secondary",children:"Likes"}),u.likes?(0,r.jsx)(ej,{fontWeight:600,children:u.likes}):(0,r.jsx)(eb,{width:47})]}),(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(ew,{color:"text.secondary",children:"Videos"}),(null==u?void 0:u.videos)?(0,r.jsx)(ej,{fontWeight:600,children:u.videos}):(0,r.jsx)(eb,{width:21})]}),(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(ew,{color:"text.secondary",children:"Images"}),(null==u?void 0:u.videos)?(0,r.jsx)(ej,{fontWeight:600,children:null==u?void 0:u.images}):(0,r.jsx)(eb,{width:32})]}),(0,r.jsx)(b.Z,{direction:"row",alignItems:"baseline",gap:"6px",alignSelf:"flex-end",ml:"auto",children:h?(0,r.jsxs)(r.Fragment,{children:[(null===(t=u.subscription)||void 0===t?void 0:t.regularPrice)&&(null===(i=u.subscription)||void 0===i?void 0:i.price)&&(0,r.jsx)(ew,{sx:{color:"text.secondary",fontWeight:600,textDecoration:"line-through",textDecorationColor:e=>(0,D.Fq)(e.palette.error.light,.8),textDecorationThickness:"6px"},children:null===(n=u.subscription)||void 0===n?void 0:n.regularPrice}),(0,r.jsxs)(b.Z,{direction:"row",alignItems:"baseline",children:[(0,r.jsx)(ej,{fontWeight:"600",children:null!==(d=null===(o=u.subscription)||void 0===o?void 0:o.price)&&void 0!==d?d:null===(l=u.subscription)||void 0===l?void 0:l.regularPrice}),((null===(a=u.subscription)||void 0===a?void 0:a.price)||(null===(s=u.subscription)||void 0===s?void 0:s.regularPrice))&&(0,r.jsx)(ew,{color:"text.secondary",children:"/month"})]})]}):(0,r.jsx)(eb,{width:90})})]})]})}):null},BokadirektWidget:function(e){var t;let{link:{url:i,metadata:n}}=e,o=(0,es.Z)(),l=!!n.name;return o||l?(0,r.jsx)(CardLink,{url:i,children:(0,r.jsxs)(b.Z,{width:"100%",pb:.5,children:[(0,r.jsx)(CardLinkHeader,{icon:(0,r.jsx)(ep(),{src:"/img/platform/Bokadirekt/outline_color.png",width:"18",height:"18",alt:"Bokadirekt"}),title:"Bokadirekt",end:n.ratingValue?(0,r.jsxs)(b.Z,{direction:"row",alignItems:"baseline",gap:"6px",children:[(0,r.jsx)(ed.Z,{sx:{alignSelf:"center",width:"0.75em",height:"0.75em",fill:ec.Z["700"]}}),(0,r.jsx)(ej,{fontWeight:"600",children:null===(t=n.ratingValue)||void 0===t?void 0:t.toFixed(1)}),(0,r.jsxs)(ew,{color:"text.secondary",children:["(",n.ratingCount," betyg)"]})]}):o&&!l?(0,r.jsx)(eb,{width:90}):null}),(0,r.jsx)(b.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:n.name?(0,r.jsx)(ej,{children:n.name}):o&&!l?(0,r.jsx)(eb,{width:200}):null}),n.address?(0,r.jsx)(ew,{color:"text.secondary",children:n.address}):o&&!l?(0,r.jsx)(ek,{width:220}):null]})}):null},GitHubWidget:function(e){var t;let{link:{url:i,metadata:n}}=e,o=(0,es.Z)(),l=(0,v.Z)(),a=!!n.contributionWeeks||!0===n.isBroken,s=x.useMemo(()=>{var e;return function(e,t){let i=e.length,n=0,r=0;for(;i--;){let t=e[i];for(let{contributionCount:e}of t.contributionDays){if(n>=30)break;r+=null!=e?e:0,n++}}return r}(null!==(e=n.contributionWeeks)&&void 0!==e?e:[],0)},[n.contributionWeeks]);return o||a?(0,r.jsx)(CardLink,{url:i,CardButtonProps:{sx:{"&:hover img":{opacity:.8,transition:"opacity 200ms ease-in-out"}}},children:(0,r.jsxs)(b.Z,{width:"100%",children:[(0,r.jsx)(CardLinkHeader,{icon:(0,r.jsx)(el.Z,{platform:"GitHub",width:"18",height:"18"}),title:"GitHub",end:(0,r.jsx)(eI.Z,{size:"small",label:"@"+n.handle})}),(0,r.jsx)(b.Z,{direction:"row",justifyContent:"space-between",children:(0,r.jsxs)(b.Z,{direction:"row",columnGap:"4px",alignItems:"center",children:[void 0!==n.followers?(0,r.jsxs)(ew,{color:"text.secondary",children:[n.followers," ",1===n.followers?"follower":"followers"]}):l&&!a?(0,r.jsx)(ek,{width:70}):null,n.totalContributions&&n.followers?(0,r.jsx)(ew,{color:"text.secondary",children:"•"}):null,void 0!==n.totalContributions?(0,r.jsxs)(ew,{color:"text.secondary",children:[s," monthly"," ",1===s?"contribution":"contributions"]}):l&&!a?(0,r.jsx)(ek,{width:150}):null]})}),(null===(t=n.contributionWeeks)||void 0===t?void 0:t.length)||!a?(0,r.jsx)(b.Z,{direction:"row",width:"100%",gap:"4px",py:1,children:(0,r.jsx)(eW,{weeks:n.contributionWeeks})}):(0,r.jsx)(A.Z,{pb:.5})]})}):null}};function ProfileLinkComponent(e){let t=e.link.component,i=eq[t]||eq.LinkCard;return x.createElement(i,e)}let eN={Bokadirekt:{place:["BokadirektWidget"]},GitHub:{handle:["GitHubWidget"]},Instagram:{handle:["InstagramWidget"]},OnlyFans:{handle:["OnlyFansWidget"]},Spotify:{track:["SpotifyEmbed"],album:["SpotifyEmbed"],playlist:["SpotifyEmbed"],episode:["SpotifyEmbed"],show:["SpotifyEmbed"],artist:["SpotifyEmbed"]},Twitch:{channel:["TwitchStream"]},YouTube:{video:["YouTubeVideo"]}},getPlatformComponents=e=>{var t,i;let{platform:n,metadata:r}=e;return n&&(null==r?void 0:r.type)&&null!==(i=null===(t=eN[n])||void 0===t?void 0:t[r.type])&&void 0!==i?i:[]},getLinkComponents=e=>[...getPlatformComponents(e),"LinkCard"],eG=(0,d.Z)((0,c.Z)(!0)).with(e=>{if(I.Z.isServer)return;let t=null;window.addEventListener("scroll",()=>{e.set(!0),clearTimeout(t),t=setTimeout(()=>e.set(!1),1e3)})}).seal();var eK=i(53867),eY=i(90331);let eX=Math.round(30);function Swipeable(e){let{selected:t,onChange:i,children:n,disabled:o}=e,[l,a]=x.useState(null),[s,d]=x.useState(null),[c,u]=x.useState(null),[p,m]=x.useState(!1),[f,g]=x.useState(),[v,Z]=x.useState(),[j,b]=x.useState(0),w=eG(),k=(0,h.Z)(e=>e.isSwiping),y=w&&!k,L=x.useMemo(()=>{var e,t;return null!==(t=null==l?void 0:null===(e=l.getBoundingClientRect())||void 0===e?void 0:e.width)&&void 0!==t?t:320},[l]),C=x.useMemo(()=>{var e;return null==l?void 0:null===(e=l.getBoundingClientRect())||void 0===e?void 0:e.height},[l]),S=x.useMemo(()=>{var e;return null==c?void 0:null===(e=c.getBoundingClientRect())||void 0===e?void 0:e.height},[c]),P=x.useMemo(()=>{var e;return null==s?void 0:null===(e=s.getBoundingClientRect())||void 0===e?void 0:e.height},[s]);x.useEffect(()=>{var e;return g(null==l?void 0:null===(e=l.getBoundingClientRect())||void 0===e?void 0:e.height)},[l]);let E=x.useMemo(()=>({height:f,transform:"translateX(calc(-".concat(100*t,"% + ").concat((y?0:j)-24*t,"px))"),transition:"transform 320ms ease-out, height 180ms ease-out",transitionDuration:0===j?"280ms, 180ms":"0ms, 0ms"}),[f,t,j,y]);return x.useEffect(()=>{Math.abs(j)>40&&h.Z.patch({isSwiping:!0})},[j]),x.useEffect(()=>{k||(Z(void 0),b(0))},[k]),(0,r.jsxs)(eQ,{onMouseOver:()=>m(!0),onMouseLeave:()=>m(!1),children:[(0,r.jsxs)(e1,{style:{opacity:p?1:.2},children:[(0,r.jsx)(eS.Z,{onClick:()=>null==i?void 0:i(-1),disabled:0===t,children:(0,r.jsx)(eK.Z,{})}),(0,r.jsx)(eS.Z,{onClick:()=>null==i?void 0:i(1),disabled:t===n.length-1,children:(0,r.jsx)(eY.Z,{})})]}),(0,r.jsx)(e$,{children:(0,r.jsx)(eJ,{style:E,onTouchStart:e=>{o||Z(e.touches[0].clientX)},onTouchEnd:e=>{if(Z(void 0),b(0),h.Z.patch({isSwiping:!1}),!o&&void 0!==v){let r=e.changedTouches[0].clientX,o=r-v;o>80&&t>0?null==i||i(-1):o<-80&&t<n.length-1?null==i||i(1):g(C)}},onTouchMove:e=>{if(!v||o)return null;let t=e.changedTouches[0].clientX,i=t-v;if(b(i),!C)return;let n=i>0?P:S;if(n){let e=n>C?0:L-eX,t=Math.abs(i);g(C+(n-C)*Math.min(1,Math.max(0,(t-e)/eX)))}else g(C)},children:n.map((e,i)=>(0,r.jsx)(e0,{ref:i===t?a:i===t-1?d:i===t+1?u:null,children:e},i))})})]})}let eQ=(0,W.ZP)(b.Z)({position:"relative"}),e$=(0,W.ZP)(b.Z)({position:"relative",overflow:"hidden",boxSizing:"content-box",maskImage:"linear-gradient(to right, transparent 34px, black 12%, black 88%, transparent calc(100% - 34px))",maskSize:"120%",maskOrigin:"content-box",maskRepeat:"no-repeat",maskPosition:"center"}),eJ=(0,W.ZP)(b.Z)({flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:"".concat(24,"px")}),e0=(0,W.ZP)(A.Z)({width:"100%",flex:"1 0 100%"}),e1=(0,W.ZP)(b.Z)({position:"absolute",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"calc(100% + 90px)",transform:"translate(-45px, -50%)",top:"50%",left:0,right:0,transition:"opacity 200ms 50ms ease-out","@media (max-width: 600px)":{display:"none"},"button:disabled":{opacity:"0 !important"}});function WidgetPicker(e){let{link:t}=e,i=(0,v.Z)();return i?(0,r.jsx)(ComponentSlider,{link:t,onChange:e=>{s.Z.patch({links:{[t.url]:{component:e}}})}}):(0,r.jsx)(ProfileLink,{link:t})}function ComponentSlider(e){let{link:t,onChange:i}=e,n=x.useMemo(()=>getLinkComponents(t),[t]),o=n.findIndex(e=>e===t.component),l=x.useCallback(e=>{let t=n[o+e];null==i||i(t)},[n,o,i]),a=(0,h.Z)(e=>e.isDragging);return(0,r.jsx)(Swipeable,{selected:o,onChange:l,disabled:a,children:n.map((e,i)=>(0,r.jsx)(ProfileLink,{link:{...t,component:e}},i))})}let SortableLink=e=>{let{link:t,sortable:i=!1}=e,n=(0,v.Z)(),{attributes:{"aria-describedby":o,...l},listeners:a,setNodeRef:s,transform:d,transition:c,isDragging:u}=(0,T.nB)({id:t.url,disabled:!i}),p=x.useMemo(()=>({transition:c,transform:(null==d?void 0:d.y)?"translateY(".concat(d.y,"px)"):void 0,zIndex:u?10:void 0,cursor:u?"grabbing":n?"grab":void 0,opacity:u?0:void 0}),[c,null==d?void 0:d.y,u,n]);return(0,r.jsx)(A.Z,{ref:s,style:p,...l,...a,children:(0,r.jsx)(WidgetPicker,{link:t})})};function LinkList(e){let{links:t}=e,i=(0,v.Z)(),n=(0,h.Z)(e=>e.isSwiping),o=(0,h.Z)(e=>e.newSectionIndex),[l,a]=x.useState(),d=useDragSensors(),c=x.useCallback(e=>{let{active:i}=e,n=t.find(e=>{let{url:t}=e;return t===i.id});a(n),I.Z.vibrate(),h.Z.patch({isDragging:!0})},[t]),u=x.useCallback(e=>{let{active:i,over:n}=e;if(a(void 0),!n)return;let r=t.findIndex(e=>{let{url:t}=e;return t===i.id}),o=t.findIndex(e=>{let{url:t}=e;return t===n.id});-1!==r&&-1!==o&&(s.Z.patch({profile:{Links:(0,T.Rp)(t,r,o)}}),setTimeout(()=>h.Z.patch({isDragging:!1}),10))},[t]),closeAddSection=()=>h.Z.patch({newSectionIndex:null});return(0,r.jsx)(y.LB,{sensors:d,autoScroll:!1,collisionDetection:y.pE,onDragEnd:u,onDragStart:c,onDragCancel:()=>a(void 0),children:(0,r.jsx)(T.Fo,{items:t.map(e=>{let{url:t}=e;return t}),disabled:!i||n,strategy:T.qw,children:(0,r.jsxs)(e8,{children:[(0,r.jsxs)(x.Fragment,{children:[(0,r.jsx)(V,{scroll:!0,id:"add-section",priority:3,enabled:i&&0===t.length,title:"Sections",content:"Use this button to insert a new section.",children:(0,r.jsx)(e2,{disabled:!!l,visible:i&&-1!==o,onClick:()=>{h.Z.patch({newSectionIndex:-1}),E.supress("add-section")}})}),(0,r.jsx)(AddSectionForm,{open:-1===o,onClose:closeAddSection})]}),t.map((e,t)=>(0,r.jsxs)(x.Fragment,{children:[(0,r.jsx)(SortableLink,{link:e,sortable:i&&!l}),(0,r.jsx)(e2,{disabled:!!l,visible:i&&o!==t,onClick:()=>h.Z.patch({newSectionIndex:t})}),(0,r.jsx)(AddSectionForm,{open:o===t,onClose:closeAddSection})]},e.url)),(0,r.jsx)(y.y9,{dropAnimation:{duration:0},modifiers:[e=>({...e.transform,x:0})],children:l?(0,r.jsx)(A.Z,{children:(0,r.jsx)(ProfileLink,{link:l})}):null})]})})})}let e2=x.forwardRef(function(e,t){let{visible:i,...n}=e;return(0,r.jsx)(e5,{...n,ref:t,style:{height:i?22:0,opacity:i&&!n.disabled?1:0,pointerEvents:i?"auto":"none"},children:(0,r.jsx)(R.Z,{color:"primary",fontSize:"small"})})}),e5=(0,W.ZP)(F.Z)(e=>{let{theme:t}=e;return{borderRadius:4,color:t.palette.text.disabled,marginBottom:t.spacing(1),transition:"all 0.2s ease-out",pointerEvents:"none",opacity:0,overflow:"hidden",background:(0,D.Fq)(t.palette.primary.main,.05)}}),e8=(0,W.ZP)(b.Z)({});var e3=i(84330),e4=i(82290),e6=i(94436),e9=i(32286),e7=x.memo(function(e){let{bio:t}=e;return(0,r.jsx)(r.Fragment,{children:tokenize(t).map((e,t)=>isHandle(e)?(0,r.jsx)(x.Fragment,{children:(0,r.jsx)(e9.Z,{handle:e.substring(1),color:e=>e.palette.info.main})},t):(0,r.jsx)(x.Fragment,{children:e},t))})});let isHandle=e=>e.startsWith("/"),tokenize=e=>{let t=[],i="";for(let n=0;n<e.length;n++){let r=e[n],o="/"===r&&e[n+1]&&/\w/.test(e[n+1])&&(!e[n-1]||/\s/.test(e[n-1]));o?(i&&(t.push(i),i=""),i+=r):/\w|-/.test(r)?i+=r:(/\s/.test(r),i.length>0&&(t.push(i),i=""),t.push(r))}return i.length>0&&t.push(i),t},decodeToImageElement=async e=>{let t=new Image;return t.src=URL.createObjectURL(e),await t.decode(),t};var te=i(81101);let formatFileSize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>1e9?(e/1e9).toFixed(t)+"GB":e>1e6?(e/1e6).toFixed(t)+"MB":e>1e3?(e/1e3).toFixed(t)+"KB":e+"B"},mimeToExtension=e=>{var t;return null==e?void 0:null===(t=e.split("/").at(-1))||void 0===t?void 0:t.split(";").at(0)};var tt=i(62950);let ti="https://dapyvmgnfosetasjwpnn.supabase.co/storage/v1/object/public/UserImages";if(!ti)throw Error("Missing NEXT_PUBLIC_SUPABASE_USER_IMAGE_BUCKET");let tn=Number("25000000"),tr=(null!==(n="image/jpg, image/jpeg, image/png, image/heic, image/heif, image/webp".split(","))&&void 0!==n?n:[]).map(e=>e.trim());var to=i(80320),tl=i(16528);function UploadCoverOverlay(){var e;let t=(0,te.Z)(),i=(0,v.Z)(),n=function(){let{db:e}=(0,f.Z)(),[t,i]=function(e){let{accept:t,multiple:i}=e,[n,r]=x.useState([]),o=x.useCallback(()=>{let e=document.createElement("input");e.type="file",e.accept=t||"",e.multiple=i||!1,e.addEventListener("change",()=>{r(Array.from(e.files||[]))}),e.click()},[t,i]);return[o,n]}({accept:tr.join(","),multiple:!1}),n=x.useCallback(async t=>{var i,n;let r=mimeToExtension(t.type);if(r){if(t.size>tn)throw Error("File is too large (".concat(formatFileSize(t.size),"). ")+"Max ".concat(formatFileSize(tn),"."))}else throw Error("Unsupported file type: ".concat(t.type));te.Z.setStatus("encoding");let o=await decodeToImageElement(t);te.Z.start(t,o);let l=tt.Z()+"."+r,a=await e.storage.from("UserImages").upload(l,t,{contentType:t.type,upsert:!1,cacheControl:"max-age=31536000"});if(a.error)throw Error(a.error.message);let s=ti+"/"+(null===(i=a.data)||void 0===i?void 0:i.path);return{url:s,name:l}},[e]);return x.useEffect(()=>{(null==i?void 0:i.length)&&n(i[0]).then(te.Z.success).catch(te.Z.error)},[i,n]),x.useEffect(()=>()=>te.Z.reset(),[]),t}(),o=(0,es.Z)(),l=(0,em.Z)(),a=x.useCallback(()=>{n(),E.supress("upload-cover")},[n]);return(x.useEffect(()=>{"uploading"===t.status&&t.image?s.Z.patch({profile:{hero:{url:t.image.src,width:t.image.width,height:t.image.height}}}):"uploaded"===t.status&&t.result&&s.Z.patch({profile:{hero:{url:t.result.url}}})},[t]),o)?(0,r.jsx)(tl.Z,{mountOnEnter:!0,timeout:500,in:i,children:(0,r.jsx)(ta,{style:{pointerEvents:"all"},position:"absolute",alignItems:"center",justifyContent:"center",onClick:a,top:12,children:(0,r.jsx)(V,{enabled:i&&!(null==l?void 0:null===(e=l.hero)||void 0===e?void 0:e.url),priority:2,id:"upload-cover",title:"Profile cover",content:"Use this button to upload a profile cover.",children:(0,r.jsx)(e6.Z,{title:"Change cover image",placement:"bottom",children:(0,r.jsx)(ts,{style:{pointerEvents:"all"},children:(0,r.jsx)(to.Z,{fontSize:"small"})})})})})}):null}let ta=(0,W.ZP)(b.Z)(e=>{let{theme:t}=e;return{position:"absolute",paddingTop:40,top:0,left:0,right:0,bottom:40,backgroundColor:(0,D.Fq)(t.palette.background.paper,.3)}}),ts=(0,W.ZP)(eS.Z)(e=>{let{theme:t}=e;return{minWidth:50,minHeight:50,backgroundColor:(0,D.Fq)(t.palette.background.paper,.5),backdropFilter:"blur(2px)",marginBottom:"32px","&:hover":{backgroundColor:(0,D.Fq)(t.palette.background.paper,.8)}}});function ProfileCover(e){var t,i,n,o,l,a,s,d;let{profile:c}=e,u=(0,e3.Z)("name"),p=(0,e3.Z)("bio"),h=null!==(l=null===(t=c.hero)||void 0===t?void 0:t.url)&&void 0!==l?l:c.pictureURL,m=null!==(a=null===(i=c.hero)||void 0===i?void 0:i.width)&&void 0!==a?a:1,x=null!==(s=null===(n=c.hero)||void 0===n?void 0:n.height)&&void 0!==s?s:1,f=eO.g;return(0,r.jsxs)(b.Z,{className:"ProfileCover",children:[h&&(0,r.jsxs)(A.Z,{sx:{position:"relative",maskImage:e=>"dark"===e.palette.mode?"linear-gradient(to top, rgba(0,0,0,0) 0%, 8%, rgba(0,0,0,0.1) 15%, rgba(0,0,0,1) 50%)":"linear-gradient(to top, rgba(0,0,0,0) 0%, 8%, rgba(0,0,0,0.25) 12.5%, rgba(0,0,0,1) 35%)",transform:"scale(1.12)",transformOrigin:"top center",width:"100%",height:"auto",transition:"border-radius 0.2s ease-in",pointerEvents:"none","@media (min-width: 390px)":{transform:"scale(1.2)"},"@media (min-width: 1200px) and (min-height: 700px)":{borderRadius:"12px",mt:"clamp(12px, 2.75vw, 54px)"},"@media (min-width: 1600px) and (min-height: 900px)":{borderRadius:"24px",mt:"clamp(22px, 2.75vw, 76px)"}},minHeight:90,children:[(0,r.jsx)(ep(),{priority:!0,src:h,alt:"Profile picture",width:f,height:f/(m/x),quality:90,style:{width:"100%",height:"auto",margin:"0 auto",filter:m<300?"blur(5px)":void 0,opacity:m<300?.6:1,transform:m<300?"scale(1.2)":"scale(1.05)"}}),(0,r.jsx)(UploadCoverOverlay,{})]}),(0,r.jsxs)(b.Z,{px:1,my:2,mt:h?-4:2,children:[(0,r.jsx)(w.Z,{component:"h1",variant:"h3",sx:{width:"100%",fontWeight:700,textWrap:"balance",fontSize:["min(10.5cqw, 3rem)","3rem"]},children:(0,r.jsx)(EditableText,{value:c.name,input:(0,r.jsx)(ez.Z,{fullWidth:!0,multiline:!0,placeholder:"Profile name",value:null!==(d=null===(o=c.name)||void 0===o?void 0:o.replace(/\n/g,""))&&void 0!==d?d:"",onChange:e=>{let{target:t}=e;return u(t.value)}})})}),(0,r.jsxs)(b.Z,{position:"relative",borderRadius:"1px",children:["free"!==c.status&&(0,r.jsx)(e6.Z,{title:"verified"===c.status?"Verified":"Premium",sx:{position:"absolute",zIndex:1,top:"50%",transform:"translateY(-54%)"},children:(0,r.jsx)(e4.Z,{fontSize:"small",color:"primary"})}),(0,r.jsx)(w.Z,{component:"h3",width:"100%",variant:"body2",color:"text.secondary",children:(0,r.jsx)(EditableText,{BoxProps:{pl:"free"===c.status?0:3.25},value:(0,r.jsx)(e7,{bio:c.bio}),input:(0,r.jsx)(ez.Z,{fullWidth:!0,multiline:!0,value:c.bio.replace(/\n/g,""),placeholder:"Write a bio",onChange:e=>{let{target:t}=e;return p(t.value)}})})})]})]})]})}function ProfileNotFound(e){let{handle:t}=e;return(0,r.jsx)(b.Z,{children:(0,r.jsxs)(A.Z,{px:2.5,mb:3,children:[(0,r.jsx)(w.Z,{variant:"h5",children:"Profile not found"}),(0,r.jsxs)(w.Z,{variant:"body1",color:"text.secondary",children:["A profile with the handle ",(0,r.jsx)(e9.Z,{linked:!1,handle:t})," ","does not exist"]}),(0,r.jsx)(B.Z,{fullWidth:!0,sx:{mt:4},href:"/",children:"Return to dott.bio"})]})})}var td=i(11977),tc=i(41154),tu=i(16347),tp=i(68708),th=i(8251);let socialURL=e=>"/api/social?"+(0,m.Z)(e).querystring(),tm=(0,Y.Z)(async e=>await G.ZP.post(socialURL(e))),isSocialLink=e=>"handle"===e.type||"channel"===e.type||"artist"===e.type||"Email"===e.platform||"Snapchat"===e.platform&&("invite"===e.type||"add"===e.type);var tx=i(52038);function PlatformChip(e){let{platform:t,children:i,label:n,...o}=e;return(0,r.jsx)(eI.Z,{...o,component:F.Z,icon:(0,r.jsx)(el.Z,{fontSize:"small",platform:t}),label:(0,r.jsxs)(b.Z,{direction:"row",alignItems:"center",gap:1,pl:.5,children:[(0,r.jsx)(w.Z,{variant:"body2",children:null!=n?n:t}),i]})})}function AddSocialForm(){var e;let t=(0,em.Z)(),i=null==t?void 0:t.Links,n=null==t?void 0:t.Socials,o=null!==(e=null==i?void 0:i.filter(e=>e.metadata&&isSocialLink(e.metadata)))&&void 0!==e?e:null,l=x.useCallback(async e=>{h.Z.patch({isAddingLink:!0});try{var t;let i=a.Z.get();if(!(0,K.Qj)(i))return;let n=await tm({link:e,handle:i.handle}),r=null==i?void 0:null===(t=i.Socials)||void 0===t?void 0:t.some(e=>{let{url:t}=e;return t===n.url});if(!i||r)return;s.Z.patch(e=>{var t,r;return{profile:{Socials:[...null!==(r=null!==(t=e.profile.Socials)&&void 0!==t?t:i.Socials)&&void 0!==r?r:[],n]}}}),h.Z.patch({addLinkError:null})}catch(e){h.Z.patch({addLinkError:e})}finally{h.Z.patch({isAddingLink:!1})}},[]);return(0,r.jsxs)(b.Z,{py:1,gap:2,children:[(0,r.jsx)(NewLinkInput,{onSubmit:l,label:"Add link or email"}),(0,r.jsxs)(b.Z,{direction:"row",pt:1,gap:1,flexWrap:"wrap",children:[null==o?void 0:o.map(e=>(0,r.jsx)(PlatformChip,{color:(null==n?void 0:n.some(t=>t.url===e.url))?"success":void 0,label:(0,Z.qC)((0,Z.Av)(e.metadata),e.platform),platform:e.platform,onClick:()=>{(null==n?void 0:n.some(t=>t.url===e.url))?s.Z.patch({profile:{Socials:null==n?void 0:n.filter(t=>{let{url:i}=t;return i!==e.url})}}):l(e.url)},children:(null==n?void 0:n.some(t=>t.url===e.url))?(0,r.jsx)(tx.Z,{sx:{width:16,height:16}}):(0,r.jsx)(en.Z,{sx:{width:16,height:16}})},e.url)),null==n?void 0:n.filter(e=>!(null==o?void 0:o.some(t=>{let{url:i}=t;return i===e.url}))).map(e=>(0,r.jsx)(PlatformChip,{platform:e.platform,color:(null==n?void 0:n.some(t=>{let{url:i}=t;return e.url===i}))?"success":void 0,label:(0,Z.qC)((0,Z.Av)(e.metadata),e.platform),onClick:()=>{s.Z.patch({profile:{Socials:null==n?void 0:n.filter(t=>{let{url:i}=t;return i!==e.url})}})},children:(0,r.jsx)(tx.Z,{sx:{width:16,height:16}})},e.url))]})]})}function AddSocialDialog(){let e=(0,h.Z)(e=>e.isSocialDialogOpen);return(0,r.jsxs)(tc.Z,{fullWidth:!0,maxWidth:"xs",PaperProps:{sx:{margin:1,width:"100%"}},open:e,onClose:()=>{h.Z.patch({isSocialDialogOpen:!1})},children:[(0,r.jsx)(th.Z,{children:"Socials"}),(0,r.jsxs)(tp.Z,{children:[(0,r.jsx)(AddSocialForm,{}),(0,r.jsx)(tu.Z,{children:(0,r.jsx)(B.Z,{sx:{mt:2,fontWeight:"bold"},variant:"text",color:"primary",size:"large",onClick:()=>{h.Z.patch({isSocialDialogOpen:!1})},children:"OK"})})]})]})}var tf=i(43194);function SocialBannerIcon(e){let{social:t}=e,i=(0,v.Z)(),n=useOutlinkProps(t.url,{source:"socials"});return(0,r.jsx)(e6.Z,{title:i?null:(0,Z.KT)(t.platform),children:(0,r.jsx)(tf.Z,{component:i?"div":"a",color:"text.primary",...n,children:(0,r.jsx)(el.Z,{sx:{width:30,height:30},platform:t.platform})})})}let tg={border:"none !important",outline:"none !important","*":{outline:"none !important",border:"none !important"}},SortableSocialIcon=e=>{let{social:t,sortable:i=!1}=e,n=(0,v.Z)(),{attributes:{"aria-describedby":o,...l},listeners:a,setNodeRef:s,transform:d,transition:c,isDragging:u}=(0,T.nB)({id:t.url,disabled:!i}),p=x.useMemo(()=>({transform:(null==d?void 0:d.x)?"translateX(".concat(d.x,"px)"):void 0,zIndex:u?10:void 0,transition:c,cursor:u?"grabbing":n?"grab":void 0}),[null==d?void 0:d.x,u,c,n]);return(0,r.jsx)(A.Z,{ref:s,sx:tg,style:p,...l,...a,children:(0,r.jsx)(SocialBannerIcon,{social:t})})};function SocialBanner(e){let{socials:t}=e,i=(0,v.Z)(),[n,o]=x.useState(!1),l=useDragSensors(),a=x.useCallback(e=>{let{active:i,over:n}=e;if(o(!1),!n)return;let r=t.findIndex(e=>{let{url:t}=e;return t===i.id}),l=t.findIndex(e=>{let{url:t}=e;return t===n.id});-1!==r&&-1!==l&&s.Z.patch({profile:{Socials:(0,T.Rp)(t,r,l)}})},[t]);return(0,r.jsxs)(b.Z,{sx:{flexDirection:"row",alignItems:"center",pb:2,px:1,gap:n?2:1.5,transition:"gap 200ms ease-in-out"},children:[(0,r.jsx)(y.LB,{sensors:l,collisionDetection:y.pE,onDragEnd:a,onDragStart:()=>{o(!0),I.Z.vibrate()},onDragCancel:()=>o(!1),children:(0,r.jsx)(T.Fo,{items:t.map(e=>{let{url:t}=e;return t}),disabled:!i||!n,strategy:T.PG,children:t.map(e=>(0,r.jsx)(SortableSocialIcon,{social:e,sortable:i},e.url))})}),(0,r.jsx)(ee.Z,{mountOnEnter:!0,in:i,sx:{pb:"4px",ml:"-2px"},children:(0,r.jsx)(V,{scroll:!0,id:"add-social",priority:1,enabled:i&&0===t.length,title:"Socials",content:"Use this button to add a new social icon.",children:(0,r.jsx)(eS.Z,{sx:{width:32,height:32,color:e=>e.palette.primary.main,backgroundColor:e=>(0,D.Fq)(e.palette.primary.main,.12),borderBottomColor:e=>(0,D.Fq)(e.palette.text.primary,.2)},onClick:()=>{h.Z.patch({isSocialDialogOpen:!0}),E.supress("add-social")},children:(0,r.jsx)(td.Z,{fontSize:"small"})})})}),(0,r.jsx)(AddSocialDialog,{})]})}var tv=i(92676),tZ=i(35437),tj=i(28013),tb=i.n(tj),tw=i(60446),tk=!0,ty=(0,tZ.M)(function(e){var t;let{handle:i}=e,n=(0,em.Z)();(0,v.Z)();let s=(0,es.Z)();return(0,tw.Z)(a.Z.sync.pull,[s?i:null],{onMount:!1,onFocus:!0,onOnline:!0,staleTime:6e4}),useAddLink(),(0,r.jsxs)(l.Z,{variant:"profile",title:null!==(t=null==n?void 0:n.name)&&void 0!==t?t:i,description:(null==n?void 0:n.bio)||"dott.bio/".concat(i),children:[(0,r.jsxs)(tb(),{children:[(0,r.jsx)("meta",{property:"og:type",content:"profile"}),(0,r.jsx)("meta",{property:"profile:username",content:i}),(0,r.jsx)("meta",{property:"og:image",content:"https://dott.bio/api/profile/preview-image?profile="+i})]}),n&&(0,r.jsx)(ProfileCover,{profile:n}),n&&(0,r.jsx)(SocialBanner,{socials:n.Socials}),n&&(0,r.jsx)(LinkList,{links:n.Links}),(0,r.jsx)(LinkDiscoveryStatus,{}),!n&&(0,r.jsx)(b.Z,{mt:"6vw",children:(0,r.jsx)(ProfileNotFound,{handle:i})}),(0,r.jsx)(o.Z,{})]})},tv.Z)},43984:function(e,t,i){"use strict";i.d(t,{Av:function(){return extractHandle},K4:function(){return prettifyURL},KT:function(){return prettifyPlatform},Vu:function(){return getLinkPlatform},qC:function(){return prettifyHandle}});let n={Instagram:/(:\/\/|\.)instagram\.com/i,Spotify:/(:\/\/|\.)spotify\.(com|link)/i,Snapchat:/(:\/\/|\.)snapchat\.com/i,YouTube:/(:\/\/|\.)(youtube\.com|youtu\.be)/i,OnlyFans:/(:\/\/|\.)onlyfans\.com/i,TikTok:/(:\/\/|\.)tiktok\.com/i,Twitter:/(:\/\/|\.)(twitter|x)\.com/i,Facebook:/(:\/\/|\.)facebook\.com/i,LinkedIn:/(:\/\/|\.)linkedin\.com/i,Twitch:/(:\/\/|\.)twitch\.tv/i,Patreon:/(:\/\/|\.)patreon\.com/i,SoundCloud:/(:\/\/|\.)soundcloud\.com/i,GitHub:/(:\/\/|\.)github\.com/i,Discord:/(:\/\/|\.)discord\.(com|gg)/i,AppleMusic:/(:\/\/|\.)music\.apple\.com/i,Apple:/(:\/\/|\.)apple\.com/i,ManyVids:/(:\/\/|\.)manyvids\.com/i,Bandcamp:/(:\/\/|\.)bandcamp\.com/i,Reddit:/(:\/\/|\.)reddit\.com/i,Fansly:/(:\/\/|\.)fansly\.com/i,PayPal:/(:\/\/|\.)paypal\.(com|me)/i,CashApp:/(:\/\/|\.)cash\.app/i,Amazon:/(:\/\/|\.)amazon\.com/i,Kick:/(:\/\/|\.)kick\.com/i,Amuse:/(:\/\/|\.)amuse\.io/i,DottBio:/(:\/\/|\.)dott\.bio/i,AllThingsLive:/(:\/\/|\.)allthingslive\.(com|se|no|dk|be|fi)/i,Bokadirekt:/(:\/\/|\.)bokadirekt\.se/i,Throne:/(:\/\/|\.)throne\.com/i,Email:/^mailto:/i};function getLinkPlatform(e){if(!e)return null;for(let[t,i]of Object.entries(n))if(i.test(e))return t;return null}let prettifyURL=e=>e.replace(/^https?:\/\/(www\.)?/,""),extractHandle=e=>{var t;if(!e)return null;let{platform:i,type:n}=e;return"handle"===n?e.handle:"AppleMusic"!==i?null:null!==(t=e.slug)&&void 0!==t?t:null},prettifyHandle=(e,t)=>e?"Patreon"===t?"/".concat(e):"GitHub"===t?e:"Reddit"===t?"/u/".concat(e):"Facebook"===t?"/".concat(e):"LinkedIn"===t?"/in/"+e:"SoundCloud"===t||"DottBio"===t?"/"+e:e.startsWith("@")?e:"@"+e:null,prettifyPlatform=e=>{switch(e){case"Twitter":return"X/Twitter";case"AppleMusic":return"Apple Music";case"DottBio":return"dott.bio";default:return e}}}},function(e){e.O(0,[590,463,47,912,310,204,182,726,774,888,179],function(){return e(e.s=97437)}),_N_E=e.O()}]);